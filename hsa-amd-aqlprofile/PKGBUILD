# Maintainer: Ranieri Althoff <ranisalt+aur at gmail.com>
# Contributor: Ilya Elenskiy <elenskiy.ilya@gmail.com>

pkgname=hsa-amd-aqlprofile
pkgver=1.0.0
pkgrel=3
_debfile="hsa-amd-aqlprofile_${pkgver}_amd64.deb"
pkgdesc='AQLPROFILE library for AMD HSA runtime API extension support'
arch=('x86_64')
url='https://github.com/RadeonOpenCompute/ROCR-Runtime'
license=('EULA')
depends=(hsa-rocr)
source=("http://repo.radeon.com/rocm/apt/debian/pool/main/h/hsa-amd-aqlprofile/${_debfile}")
sha256sums=('928f0074a59eda2d10116e45c9670da961ea72617ead23cde4c3d640262620fe')
_rocmver='3.1.0'

package() {
  tar -C "$pkgdir" -xf data.tar.gz
  rename -- "-$_rocmver" '' "$pkgdir/opt/rocm-$_rocmver"
  rename -- "${pkgname#hsa}" '' "$pkgdir/opt/rocm/$pkgname"
  find "$pkgdir" -type d -exec chmod 755 '{}' '+'
}

